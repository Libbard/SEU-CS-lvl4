<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KRZGYLS6FK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KRZGYLS6FK');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Exam - Discrete Mathematics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #fffbeb; } /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙØ§ØªØ­ Ø¬Ø¯Ø§Ù‹ */
        .amber-gradient { background: linear-gradient(135deg, #d97706 0%, #c2410c 100%); }
        
        .question-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #fed7aa;
            transition: all 0.3s;
        }
        
        .question-card.correct-card { border-right: 6px solid #22c55e; background-color: #f0fdf4; }
        .question-card.wrong-card { border-right: 6px solid #ef4444; background-color: #fef2f2; }

        .option-btn {
            display: block;
            width: 100%;
            text-align: right;
            padding: 12px 15px;
            margin: 8px 0;
            background-color: #fff7ed;
            border: 2px solid #ffedd5;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            color: #431407;
        }
        .option-btn:hover:not(.disabled) { background-color: #fed7aa; border-color: #f97316; }
        
        .option-btn.correct { background-color: #dcfce7 !important; border-color: #22c55e !important; color: #166534; font-weight: bold; }
        .option-btn.wrong { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b; }
        .option-btn.disabled { pointer-events: none; opacity: 0.8; }

        .cheat-box {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            color: #92400e;
            font-size: 0.9rem;
            animation: fadeIn 0.5s;
        }

        .essay-answer {
            display: none;
            margin-top: 15px;
            padding: 20px;
            background-color: #fff7ed;
            border-right: 4px solid #f97316;
            border-radius: 8px;
            color: #7c2d12;
            line-height: 1.8;
        }

        /* --- Score Badge & Grading Styles --- */
        .score-badge {
            background-color: #f59e0b;
            color: white;
            padding: 5px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-family: monospace;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 2px solid #b45309;
            transition: transform 0.2s;
        }
        
        .grading-btns {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #cbd5e1;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .grade-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .grade-btn:active { transform: scale(0.95); }
        
        .grade-yes { background: #dcfce7; color: #166534; border: 1px solid #166534; }
        .grade-no { background: #fee2e2; color: #991b1b; border: 1px solid #991b1b; }

        @media print {
            .no-print { display: none !important; }
            body { background: white; }
            .question-card { break-inside: avoid; border: 1px solid #ccc; box-shadow: none; }
            .cheat-box, .essay-answer { display: block !important; border: 1px dashed #999; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-amber-50 text-slate-800 pb-20">

    <nav class="bg-slate-900 shadow-md sticky top-0 z-50 border-b border-amber-600 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-black text-amber-500 ml-2">DiscreteMaster</a>
                    <span class="text-xs bg-amber-900 text-amber-100 py-1 px-2 rounded-full font-bold border border-amber-700">Exam Mode</span>
                </div>
                
                <div class="flex items-center gap-2 md:gap-3">
                    <a href="index.html" class="flex items-center gap-1 bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-1.5 rounded-lg text-sm font-bold transition">
                        <span>ğŸ </span> <span class="hidden md:inline">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                    </a>
                    
                    <div id="score-board" class="score-badge">
                        <span>ğŸ†</span> <span id="current-score">0</span> / 40
                    </div>

                    <div id="timer" class="bg-amber-600 text-white px-3 py-1.5 rounded-lg font-mono font-bold text-sm md:text-base">120:00</div>
                    
                    <button onclick="window.print()" class="bg-slate-200 hover:bg-slate-300 text-slate-700 px-3 py-1.5 rounded-lg text-sm font-bold" title="Ø·Ø¨Ø§Ø¹Ø©">ğŸ–¨ï¸</button>
                    <button onclick="resetExam()" class="bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1.5 rounded-lg text-sm font-bold" title="Ø¥Ø¹Ø§Ø¯Ø©">ğŸ”„</button>
                </div>
            </div>
        </div>
    </nav>

    <header class="amber-gradient text-white py-12 text-center shadow-lg mb-8 no-print">
        <h1 class="text-3xl md:text-5xl font-black mb-2 drop-shadow-md">CS-243 Final Practice Exam</h1>
        <p class="text-amber-100 text-lg font-medium">60 Ø³Ø¤Ø§Ù„ MCQ (0.5 Ø¯Ø±Ø¬Ø©) + 5 Ø£Ø³Ø¦Ù„Ø© Ù…Ù‚Ø§Ù„ÙŠØ© (2 Ø¯Ø±Ø¬Ø©)</p>
    </header>

    <main class="max-w-4xl mx-auto px-4">
        
        <div class="flex justify-end mb-6 no-print">
            <button onclick="revealAll()" class="bg-amber-600 hover:bg-amber-700 text-white px-6 py-2 rounded-full font-bold shadow-lg transition transform hover:scale-105 flex items-center gap-2">
                <span>ğŸ‘ï¸</span> ÙƒØ´Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            </button>
        </div>

        <div id="quiz-container" class="space-y-6"></div>

    </main>

    <script>
        // ==========================================
        // 1. DATA BANK (Discrete Math)
        // ==========================================
        const mcqData = [
            // --- MIDTERM (WEEKS 1-5) ---
            { section: "Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„: Ù…Ø§Ø¯Ø© Ø§Ù„Ù…ÙŠØ¯ ØªÙŠØ±Ù… (Weeks 1-5)", q: "Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„Ø´Ø±Ø·ÙŠØ© $p \\to q$ ØªÙƒÙˆÙ† Ø®Ø§Ø·Ø¦Ø© (False) ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ÙˆÙ‡ÙŠ:", options: ["p ØµØ§Ø¦Ø¨Ø© Ùˆ q ØµØ§Ø¦Ø¨Ø©", "p Ø®Ø§Ø·Ø¦Ø© Ùˆ q ØµØ§Ø¦Ø¨Ø©", "p ØµØ§Ø¦Ø¨Ø© Ùˆ q Ø®Ø§Ø·Ø¦Ø©", "p Ø®Ø§Ø·Ø¦Ø© Ùˆ q Ø®Ø§Ø·Ø¦Ø©"], a: 2, cheat: "$T \\to F$ Ù‡ÙŠ Ø§Ù„Ù…ØµÙŠØ¨Ø© Ø§Ù„ÙˆØ­ÙŠØ¯Ø©." },
            { q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© $A$ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 3 Ø¹Ù†Ø§ØµØ±ØŒ ÙÙƒÙ… Ø¹Ø¯Ø¯ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù€ Power Set $P(A)$ØŸ", options: ["3", "6", "8", "9"], a: 2, cheat: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† $2^n$. ÙŠØ¹Ù†ÙŠ $2^3 = 8$." },
            { q: "Ø§Ù„Ø¯Ø§Ù„Ø© $f(x) = x^2$ Ù…Ù† $Z$ Ø¥Ù„Ù‰ $Z$ Ù‡ÙŠ:", options: ["One-to-One", "Onto", "Bijective", "Ù„ÙŠØ³Øª One-to-One ÙˆÙ„ÙŠØ³Øª Onto"], a: 3, cheat: "Ø§Ù„ØªØ±Ø¨ÙŠØ¹ ÙŠÙ‚ØªÙ„ Ø§Ù„Ø³Ø§Ù„Ø¨ (Ù„ÙŠØ³Øª 1-to-1) ÙˆÙ„Ø§ ÙŠØºØ·ÙŠ Ø§Ù„Ø³Ø§Ù„Ø¨ (Ù„ÙŠØ³Øª Onto)." },
            { q: "Ù†ÙÙŠ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© 'ÙƒÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù†Ø¬Ø­ÙˆØ§' ($\\forall x P(x)$) Ù‡Ùˆ:", options: ["ÙƒÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø±Ø³Ø¨ÙˆØ§", "ÙŠÙˆØ¬Ø¯ Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù… ÙŠÙ†Ø¬Ø­", "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ø§Ù„Ø¨ Ù†Ø¬Ø­", "Ø¨Ø¹Ø¶ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù†Ø¬Ø­ÙˆØ§"], a: 1, cheat: "Ù†ÙÙŠ 'Ø§Ù„ÙƒÙ„' Ù‡Ùˆ 'ÙŠÙˆØ¬Ø¯ ÙˆØ§Ø­Ø¯ Ø®Ø§Ù„Ù'. Ù†ÙÙŠ $\\forall$ Ù‡Ùˆ $\\exists \\neg$." },
            { q: "ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ§Øª Ø§Ù„Ø¨ÙˆÙ„ÙŠØ§Ù†ÙŠØ©ØŒ Ø¹Ù…Ù„ÙŠØ© $A \\vee B$ (Join) ØªØ¹Ù†ÙŠ:", options: ["Ù†Ø£Ø®Ø° Ø§Ù„Ø£ØµØºØ±", "Ù†Ø£Ø®Ø° Ø§Ù„Ø£ÙƒØ¨Ø± (1 Ø¥Ø°Ø§ ÙˆØ¬Ø¯)", "Ù†Ø¶Ø±Ø¨ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…", "Ù†Ø·Ø±Ø­ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…"], a: 1, cheat: "Ø§Ù„Ø¹Ù„Ø§Ù…Ø© $\\vee$ Ù…Ø«Ù„ Ø§Ù„ÙƒØ£Ø³ØŒ ØªÙ‚Ø¨Ù„ Ø£ÙŠ 1." },
            { q: "Ø§Ù„Ø­Ø¯ Ø§Ù„Ø®Ø§Ù…Ø³ ÙÙŠ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ© $\\{3, 6, 12, ...\\}$ Ù‡Ùˆ:", options: ["24", "36", "48", "60"], a: 2, cheat: "3, 6, 12, 24, 48 (Ø§Ø¶Ø±Ø¨ ÙÙŠ 2)." },
            { q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª $A = \\{1, 2\\}$ Ùˆ $B = \\{a, b, c\\}$ØŒ ÙØ¥Ù† Ø¹Ø¯Ø¯ Ø¹Ù†Ø§ØµØ± $A \\times B$ Ù‡Ùˆ:", options: ["5", "6", "2", "3"], a: 1, cheat: "$2 \\times 3 = 6$." },
            { q: "Ø§Ù„Ù…Ø¹ÙƒÙˆØ³ (Inverse) Ù„Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯ ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¯Ø§Ù„Ø©:", options: ["One-to-One", "Onto", "Bijective", "Function"], a: 2, cheat: "Ù„Ø§Ø²Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø±Ø§ÙŠØ­ Ø¬Ø§ÙŠ (Bijective)." },
            { q: "Ù‚ÙŠÙ…Ø© $\\lfloor 2.9 \\rfloor$ Ù‡ÙŠ:", options: ["3", "2", "2.9", "2.5"], a: 1, cheat: "Floor ÙŠØ¹Ù†ÙŠ Ø£Ø±Ø¶ÙŠØ©ØŒ Ø§Ø±Ù…Ù Ø§Ù„Ø±Ù‚Ù… Ù„Ù„Ø£Ø³ÙÙ„." },
            { q: "Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØŒ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ ØªØ³Ù…Ù‰:", options: ["Inductive Step", "Recursive Step", "Basis Step", "Final Step"], a: 2, cheat: "Ø§Ù„Ø£Ø³Ø§Ø³ Ù‡Ùˆ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©." },
            { q: "Ù…Ø¬Ù…ÙˆØ¹ Ø£ÙˆÙ„ $n$ Ø£Ø¹Ø¯Ø§Ø¯ ØµØ­ÙŠØ­Ø© Ù…ÙˆØ¬Ø¨Ø© ÙŠØ³Ø§ÙˆÙŠ:", options: ["$n(n+1)$", "$n^2$", "$n(n+1)/2$", "$n(n-1)/2$"], a: 2, cheat: "Ø¬Ø±Ø¨ $n=2$ (1+2=3). Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ø°ÙŠ ÙŠØ¹Ø·ÙŠ 3 Ù‡Ùˆ (Ø¬)." },
            { q: "Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„Ù…Ø­Ø§ÙŠØ¯Ø© $I_n$ Ù‡ÙŠ Ù…ØµÙÙˆÙØ©:", options: ["Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ±Ù‡Ø§ 1", "Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ±Ù‡Ø§ 0", "Ù‚Ø·Ø±Ù‡Ø§ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ 1 ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ 0", "Ù‚Ø·Ø±Ù‡Ø§ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ 0 ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ 1"], a: 2, cheat: "Ø§Ù„Ù‡ÙˆÙŠØ© $I$ ØªØ´Ø¨Ù‡ 1." },
            { q: "Ø§Ù„Ø¹Ù…Ù„ÙŠØ© $A \\cap B$ ØªØ¹Ù†ÙŠ:", options: ["Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ A Ø£Ùˆ B", "Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© ÙÙ‚Ø·", "Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ A ÙˆÙ„ÙŠØ³Øª ÙÙŠ B", "ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±"], a: 1, cheat: "Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ ÙŠØ£Ø®Ø° Ø§Ù„Ù…Ø´ØªØ±Ùƒ." },
            { q: "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª $p$ ØµØ§Ø¦Ø¨Ø©ØŒ ÙØ¥Ù† $p \\vee q$ ØªÙƒÙˆÙ†:", options: ["Ø¯Ø§Ø¦Ù…Ø§Ù‹ ØµØ§Ø¦Ø¨Ø©", "Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø®Ø§Ø·Ø¦Ø©", "ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ q", "ØºÙŠØ± Ù…Ø¹Ø±ÙØ©"], a: 0, cheat: "ÙÙŠ OR ÙŠÙƒÙÙŠ ÙˆØ§Ø­Ø¯ ØµØ­." },
            { q: "Ù…ØªØªØ§Ù„ÙŠØ© ÙÙŠØ¨ÙˆÙ†Ø§ØªØ´ÙŠ: 0, 1. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù‡Ùˆ:", options: ["1", "2", "3", "5"], a: 1, cheat: "0, 1, 1, 2." },
            { q: "'Ø¥Ø°Ø§ Ø£Ù…Ø·Ø±ØªØŒ Ø³Ø£Ù„Ø¹Ø¨'. Ø¥Ø°Ø§ 'Ù„Ù… Ø£Ù„Ø¹Ø¨'ØŒ Ù…Ø§Ø°Ø§ ØªØ³ØªÙ†ØªØ¬ØŸ", options: ["Ø£Ù†Ù‡Ø§ Ø£Ù…Ø·Ø±Øª", "Ø£Ù†Ù‡Ø§ Ù„Ù… ØªÙ…Ø·Ø±", "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬", "Ø³Ø£Ù„Ø¹Ø¨ ØºØ¯Ø§Ù‹"], a: 1, cheat: "Modus Tollens: Ø§Ù†ØªÙØ§Ø¡ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¹Ù†ÙŠ Ø§Ù†ØªÙØ§Ø¡ Ø§Ù„Ø³Ø¨Ø¨." },
            { q: "Ø£Ø¹Ø¸Ù… Ù‚Ø§Ø³Ù… Ù…Ø´ØªØ±Ùƒ $GCD(8, 12)$ Ù‡Ùˆ:", options: ["2", "4", "8", "24"], a: 1, cheat: "Ø£ÙƒØ¨Ø± Ø±Ù‚Ù… ÙŠÙ‚Ø³Ù… Ø§Ù„Ø§Ø«Ù†ÙŠÙ† Ù‡Ùˆ 4." },
            { q: "Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ø§Ù„Ø£ØµØºØ± $LCM(4, 6)$ Ù‡Ùˆ:", options: ["12", "24", "10", "2"], a: 0, cheat: "6 Ù„Ø§ ØªÙ‚Ø¨Ù„ØŒ 12 ØªÙ‚Ø¨Ù„." },

            // --- FINAL (WEEKS 6-12) ---
            { section: "Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ù…Ø§Ø¯Ø© Ø§Ù„ÙØ§ÙŠÙ†Ù„ (Weeks 6-12)", q: "(Pigeonhole) 6 Ø­Ù…Ø§Ù…Ø§Øª Ùˆ 5 Ø£Ø¨Ø±Ø§Ø¬. ÙŠÙˆØ¬Ø¯ Ø¨Ø±Ø¬ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:", options: ["Ø­Ù…Ø§Ù…Ø© ÙˆØ§Ø­Ø¯Ø©", "Ø­Ù…Ø§Ù…ØªÙŠÙ† Ø£Ùˆ Ø£ÙƒØ«Ø±", "3 Ø­Ù…Ø§Ù…Ø§Øª", "0 Ø­Ù…Ø§Ù…"], a: 1, cheat: "Ø§Ù„Ø­Ù…Ø§Ù… > Ø§Ù„Ø£Ø¨Ø±Ø§Ø¬ = Ø²Ø­Ù…Ø©." },
            { q: "Ø¹Ø¯Ø¯ Ø·Ø±Ù‚ ØªØ±ØªÙŠØ¨ 3 ÙƒØªØ¨ Ù…Ø®ØªÙ„ÙØ© (Permutations):", options: ["3", "6", "9", "1"], a: 1, cheat: "$3! = 6$." },
            { q: "Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© ØªØ³Ù…Ù‰ Equivalence Ø¥Ø°Ø§ ÙƒØ§Ù†Øª:", options: ["Reflexive, Symmetric, Transitive", "Reflexive, Antisymmetric, Transitive", "Symmetric", "Transitive"], a: 0, cheat: "RST = Equivalence." },
            { q: "Ù…Ø¬Ù…ÙˆØ¹ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø±Ø¤ÙˆØ³ ÙÙŠ Ø§Ù„Ø±Ø³Ù… ÙŠØ³Ø§ÙˆÙŠ:", options: ["Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ù", "Ø¶Ø¹Ù Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ù ($2|E|$)", "Ù†ØµÙ Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ù", "Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø¤ÙˆØ³"], a: 1, cheat: "Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù…ØµØ§ÙØ­Ø©: ÙƒÙ„ Ø®Ø· Ù„Ù‡ Ø·Ø±ÙÙŠÙ†." },
            { q: "Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Loops ÙˆÙ„Ø§ Multiple Edges:", options: ["Simple Graph", "Multigraph", "Pseudograph", "Directed"], a: 0, cheat: "Ø¨Ø³ÙŠØ· = Ù†Ø¸ÙŠÙ." },
            { q: "Ø§Ù„Ø±Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ $K_5$ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø­ÙˆØ§Ù:", options: ["5", "10", "20", "25"], a: 1, cheat: "$5 \\times 4 / 2 = 10$." },
            { q: "Ù„ÙƒÙŠ ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø±Ø³Ù… Ø¹Ù„Ù‰ Euler CircuitØŒ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ†:", options: ["ÙØ±Ø¯ÙŠØ©", "Ø²ÙˆØ¬ÙŠØ©", "Ù…ØªØ³Ø§ÙˆÙŠØ©", "Ù„Ø§ ÙŠÙ‡Ù…"], a: 1, cheat: "Ø¯Ø®ÙˆÙ„ ÙˆØ®Ø±ÙˆØ¬ = Ø²ÙˆØ¬ÙŠ." },
            { q: "Ø§Ù„Ø±Ø³Ù… Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„ØªØ¬Ø²Ø¦Ø© (Bipartite) Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:", options: ["Cycles of even length", "Cycles of odd length", "Edges", "Vertices"], a: 1, cheat: "Ø§Ù„Ù…Ø«Ù„Ø« (ÙØ±Ø¯ÙŠ) ÙŠØ®Ø±Ø¨ Ø§Ù„ØªÙ‚Ø³ÙŠÙ…." },
            { q: "Ø¹Ø¯Ø¯ Ø­ÙˆØ§Ù Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„ØªÙŠ Ù„Ù‡Ø§ $n$ Ø±Ø¤ÙˆØ³:", options: ["$n$", "$n-1$", "$n+1$", "$2n$"], a: 1, cheat: "Edges = Vertices - 1." },
            { q: "ÙÙŠ Full Binary TreeØŒ Ø¥Ø°Ø§ ÙƒØ§Ù† $i$ Ø±Ø¤ÙˆØ³ Ø¯Ø§Ø®Ù„ÙŠØ©ØŒ ÙØ¥Ù† Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ $n$:", options: ["$2i + 1$", "$2i$", "$i + 1$", "$3i + 1$"], a: 0, cheat: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† $m \\times i + 1$." },
            { q: "Ø§Ù„Ø¹Ø¨ÙˆØ± Left $\\to$ Root $\\to$ Right ÙŠØ³Ù…Ù‰:", options: ["Preorder", "Inorder", "Postorder", "Level"], a: 1, cheat: "Root ÙÙŠ Ø§Ù„ÙˆØ³Ø· (In)." },
            { q: "Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Dijkstra ØªØ³ØªØ®Ø¯Ù… Ù„Ù€:", options: ["MST", "Shortest Path", "Coloring", "Euler"], a: 1, cheat: "Dijkstra = GPS." },
            { q: "Ù…Ø¹Ø§Ø¯Ù„Ø© Ø£ÙˆÙŠÙ„Ø± Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ©: $r = e - v + ?$ :", options: ["1", "2", "0", "3"], a: 1, cheat: "REV 2." },
            { q: "Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±ÙˆÙ…Ø§ØªÙŠ Ù„Ù€ $K_4$ Ù‡Ùˆ:", options: ["2", "3", "4", "1"], a: 2, cheat: "ÙƒÙ„Ù‡Ù… Ù…ØªØµÙ„ÙŠÙ† Ø¨Ø¨Ø¹Ø¶ØŒ ÙƒÙ„ ÙˆØ§Ø­Ø¯ Ù„ÙˆÙ†." },
            { q: "Ø§Ù„Ø´Ø¬Ø±Ø© (Tree) Ù‡ÙŠ Ø±Ø³Ù…:", options: ["Connected with cycles", "Connected with NO cycles", "Disconnected", "Loops"], a: 1, cheat: "Ø´Ø¬Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ù„Ø§ ØªØ¹ÙˆØ¯ Ù„Ù„Ø®Ù„Ù." },
            { q: "ÙÙŠ HuffmanØŒ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø£ÙƒØ«Ø± ØªÙƒØ±Ø§Ø±Ø§Ù‹ ØªØ£Ø®Ø° ÙƒÙˆØ¯:", options: ["Ø£Ø·ÙˆÙ„", "Ø£Ù‚ØµØ±", "Ù…ØªØ³Ø§ÙˆÙŠ", "Ø¹Ø´ÙˆØ§Ø¦ÙŠ"], a: 1, cheat: "ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø­Ø©." },
            { q: "Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© $A \\to aB$ ØªÙ…Ø«Ù„ Grammar Ù…Ù† Ù†ÙˆØ¹:", options: ["Regular", "Context-Free", "Context-Sensitive", "Unrestricted"], a: 0, cheat: "Ø®Ø·ÙŠ Ø¨Ø³ÙŠØ· = Regular." },
            { q: "Ø§Ù„Ù€ DFA ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„ØºØ§Øª:", options: ["Regular", "Context-Free", "All", "None"], a: 0, cheat: "Finite = Regular." },
            { q: "Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† DFA Ùˆ NFA:", options: ["NFA Ù„Ù‡Ø§ Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Non-deterministic)", "DFA Ù„Ù‡Ø§ Ø®ÙŠØ§Ø±Ø§Øª", "DFA Ø¨Ù„Ø§ Ù†Ù‡Ø§ÙŠØ©", "Ù„Ø§ ÙØ±Ù‚"], a: 0, cheat: "N = Non-deterministic." },
            { q: "Ø§Ù„Ø±Ù…Ø² $\\lambda$ Ø£Ùˆ $\\epsilon$ ÙÙŠ NFA ÙŠØ¹Ù†ÙŠ:", options: ["Ù†Ù‡Ø§ÙŠØ©", "Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¬Ø§Ù†ÙŠ", "Ø®Ø·Ø£", "ØªÙƒØ±Ø§Ø±"], a: 1, cheat: "Ø³Ù‡Ù… Ø³Ø­Ø±ÙŠ." },
            { q: "Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Prim ØªØ³ØªØ®Ø¯Ù… Ù„Ù€:", options: ["Max Tree", "Min Spanning Tree (MST)", "Shortest Path", "Planar"], a: 1, cheat: "Prim Ù„Ù„ØªÙˆÙÙŠØ±." },
            { q: "ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ØŒ Ø§Ù„Ø±Ù…Ø² $T$ ÙŠØ¹Ù†ÙŠ:", options: ["Terminals", "Transitions", "Trees", "Total"], a: 0, cheat: "Ø§Ù„Ù†Ù‡Ø§ÙŠØ§Øª." },
            { q: "Ø¹Ø¯Ø¯ Ø­ÙˆØ§Ù Full 3-ary Tree Ø¨Ù‡Ø§ 100 Ø±Ø£Ø³ Ø¯Ø§Ø®Ù„ÙŠ:", options: ["200", "300", "301", "100"], a: 1, cheat: "$3 \\times 100 = 300$." },
            { q: "Ø£ÙŠ Ø±Ø³Ù… ÙŠØ¹ØªØ¨Ø± BipartiteØŸ", options: ["K3", "C5", "C4", "K5"], a: 2, cheat: "C4 (Ø§Ù„Ù…Ø±Ø¨Ø¹) Ø²ÙˆØ¬ÙŠ Ø§Ù„Ø±Ø¤ÙˆØ³." },
            { q: "Ù…ØµÙÙˆÙØ© Ù‚Ø·Ø±Ù‡Ø§ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙƒÙ„Ù‡ 1 ØªÙ…Ø«Ù„ Ø¹Ù„Ø§Ù‚Ø©:", options: ["Symmetric", "Reflexive", "Transitive", "Anti"], a: 1, cheat: "ÙŠØ±ØªØ¨Ø· Ø¨Ù†ÙØ³Ù‡." },
            { q: "Ø¯Ø±Ø¬Ø© Ø§Ù„Ø±Ø£Ø³ (Undirected) Ù‡ÙŠ:", options: ["Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙŠØ±Ø§Ù†", "Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ù…ØªØµÙ„Ø©", "Ø£ Ùˆ Ø¨", "Ø§Ù„ÙˆØ²Ù†"], a: 2, cheat: "Ø§Ù„Ø¬ÙŠØ±Ø§Ù† = Ø§Ù„Ø®Ø·ÙˆØ·." },
            { q: "Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù€ Bridge ØªØ¬Ø¹Ù„ Ø§Ù„Ø±Ø³Ù…:", options: ["Connected", "Disconnected", "Complete", "Tree"], a: 1, cheat: "ÙŠÙ†Ù‚Ø·Ø¹ Ø§Ù„Ø¬Ø³Ø±." },
            { q: "ÙÙŠ PreorderØŒ Ø§Ù„Ø¬Ø°Ø± ÙŠØ²Ø§Ø±:", options: ["Ø£ÙˆÙ„Ø§Ù‹", "ÙˆØ³Ø·", "Ø£Ø®ÙŠØ±Ø§Ù‹", "Ø¹Ø´ÙˆØ§Ø¦ÙŠ"], a: 0, cheat: "Pre = Ù‚Ø¨Ù„." },
            { q: "Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Kruskal ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰:", options: ["ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­ÙˆØ§Ù Ø¨Ø§Ù„Ø£ÙˆØ²Ø§Ù†", "Ø§Ù„Ø±Ø¤ÙˆØ³", "Ù…Ø³Ø§Ø± ÙˆØ§Ø­Ø¯", "Ø¹Ø´ÙˆØ§Ø¦ÙŠ"], a: 0, cheat: "Ø¨Ø®ÙŠÙ„ØŒ ÙŠØ±ØªØ¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±." },
            { q: "Ø§Ù„Ø±Ø³Ù… $K_{3,3}$ Ù‡Ùˆ:", options: ["Planar", "Non-planar", "Tree", "Disconnected"], a: 1, cheat: "Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø¨ÙŠÙˆØª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª." },
            { q: "Regular Expressions ØªØµÙ:", options: ["Regular Languages", "Algorithms", "Graphs", "Databases"], a: 0, cheat: "Ù…Ù† Ø§Ø³Ù…Ù‡Ø§." },
            { q: "Ù…Ø®Ø±Ø¬Ø§Øª Moore Machine ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰:", options: ["Current State", "Inputs", "Both", "Next State"], a: 0, cheat: "Moore (Ù‚ØµÙŠØ±) = State." },
            { q: "Ø§Ù„Ù€ Parse Tree ØªÙ…Ø«Ù„:", options: ["Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„Ø¬Ù…Ù„Ø©", "Ø£Ù‚ØµØ± Ù…Ø³Ø§Ø±", "Ø¨Ø­Ø«", "Ø¹Ø§Ø¦Ù„Ø©"], a: 0, cheat: "ØªØ­Ù„ÙŠÙ„ Ù„ØºÙˆÙŠ." },
            { q: "Ø§Ù„Ù„ØºØ© $\\{0^n 1^n\\}$ Ù‡ÙŠ:", options: ["Context-Free", "Regular", "Undefined", "Type 3"], a: 0, cheat: "ØªØ­ØªØ§Ø¬ Ø¹Ø¯ = Ø°Ø§ÙƒØ±Ø©." },
            { q: "Ø´Ø±Ø· ÙˆØ¬ÙˆØ¯ Euler Path (ÙˆÙ„ÙŠØ³ Ø¯Ø§Ø¦Ø±Ø©):", options: ["Ø±Ø£Ø³ÙŠÙ† ÙØ±Ø¯ÙŠÙŠÙ† Ø¨Ø§Ù„Ø¶Ø¨Ø·", "ÙƒÙ„Ù‡Ù… Ø²ÙˆØ¬ÙŠ", "3 ÙØ±Ø¯ÙŠ", "Ù„Ø§ ÙŠÙˆØ¬Ø¯"], a: 0, cheat: "Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ†Ù‡Ø§ÙŠØ©." },
            { q: "Ø¹Ø¯Ø¯ $P(4, 2)$:", options: ["12", "6", "4", "16"], a: 0, cheat: "$4 \\times 3 = 12$." },
            { q: "Ù…ÙƒÙ…Ù„ Ø§Ù„Ø±Ø³Ù… G ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:", options: ["Ù†ÙØ³ Ø§Ù„Ø±Ø¤ÙˆØ³ ÙˆØ­ÙˆØ§Ù Ø¹ÙƒØ³ÙŠØ©", "Ø±Ø¤ÙˆØ³ Ù…Ø®ØªÙ„ÙØ©", "Ù†ÙØ³ Ø§Ù„Ø­ÙˆØ§Ù", "Ù„Ø§Ø´ÙŠØ¡"], a: 0, cheat: "Ù…Ø§ ØªØ¨Ù‚Ù‰ Ù…Ù† Ø§Ù„Ø­ÙˆØ§Ù." },
            { q: "Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø±Ø¨Ø¹Ø© Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ©:", options: ["4 Ø£Ù„ÙˆØ§Ù† ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰", "3 Ø£Ù„ÙˆØ§Ù†", "5 Ø£Ù„ÙˆØ§Ù†", "6"], a: 0, cheat: "Four Color Theorem." },
            { q: "Ø§Ù„Ù€ Turing Machine ØªØ®ØªÙ„Ù Ø¹Ù† DFA Ø¨Ù€:", options: ["Infinite Tape", "Stack", "Finite Memory", "No states"], a: 0, cheat: "Ø´Ø±ÙŠØ· Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ." },
            { q: "Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ ÙÙŠ Full Binary Tree Ø¨Ù€ 50 Ø±Ø£Ø³ Ø¯Ø§Ø®Ù„ÙŠ:", options: ["51", "50", "100", "101"], a: 0, cheat: "$50 + 1 = 51$." }
        ];

        const essayData = [
            { q: "Ø³1: ØªØªØ¨Ø¹ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Dijkstra Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø£Ù‚ØµØ± Ù…Ø³Ø§Ø±ØŸ", a: "1. Ø§Ø±Ø³Ù… Ø¬Ø¯ÙˆÙ„ (Nodes, Dist, Parent).<br>2. Ø§Ø¨Ø¯Ø£ Ø¨Ù€ start=0 ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ infinity.<br>3. Ø§Ø®ØªØ± Ø§Ù„Ø£ØµØºØ±ØŒ ÙˆØ­Ø¯Ø« Ø§Ù„Ø¬ÙŠØ±Ø§Ù†: $New = \\min(Old, Current + Weight)$." },
            { q: "Ø³2: Ø£ÙˆØ¬Ø¯ Preorder, Inorder, Postorder Ù„Ø´Ø¬Ø±Ø© Ù…Ø¹Ø·Ø§Ø©ØŸ", a: "â€¢ <strong>Pre:</strong> Ù†Ù‚Ø·Ø© ÙŠØ³Ø§Ø± Ø§Ù„Ø¹Ù‚Ø¯Ø©.<br>â€¢ <strong>In:</strong> Ù†Ù‚Ø·Ø© Ø£Ø³ÙÙ„ Ø§Ù„Ø¹Ù‚Ø¯Ø©.<br>â€¢ <strong>Post:</strong> Ù†Ù‚Ø·Ø© ÙŠÙ…ÙŠÙ† Ø§Ù„Ø¹Ù‚Ø¯Ø©." },
            { q: "Ø³3: Ø£Ø«Ø¨Øª Ø¨Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ Ø£Ù† Ù…Ø¬Ù…ÙˆØ¹ n Ø£Ø¹Ø¯Ø§Ø¯ ÙŠØ³Ø§ÙˆÙŠ $n(n+1)/2$ØŸ", a: "1. <strong>Basis:</strong> Ø¬Ø±Ø¨ $n=1$.<br>2. <strong>Hypothesis:</strong> Ø§ÙØªØ±Ø¶ ØµØ­ØªÙ‡Ø§ Ø¹Ù†Ø¯ $k$.<br>3. <strong>Inductive:</strong> Ø£Ø«Ø¨Øª Ù„Ù€ $k+1$ Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø·Ø±ÙÙŠÙ†." },
            { q: "Ø³4: Ø§Ø±Ø³Ù… DFA ØªÙ‚Ø¨Ù„ Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© Ø¨Ù€ '00'ØŸ", a: "ØªØ­ØªØ§Ø¬ 3 Ø­Ø§Ù„Ø§Øª:<br>â€¢ $S_0$: Ø¨Ø¯Ø§ÙŠØ©.<br>â€¢ $S_1$: Ø§Ø³ØªÙ„Ù…Øª ØµÙØ± ÙˆØ§Ø­Ø¯.<br>â€¢ $S_2$: Ø§Ø³ØªÙ„Ù…Øª ØµÙØ±ÙŠÙ† (Final).<br>Ø£ÙŠ 1 ÙŠØ¹ÙŠØ¯Ùƒ Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©." },
            { q: "Ø³5: ÙƒÙŠÙ ØªØ­Ø¯Ø¯ Isomorphism Ø¨ÙŠÙ† Ø±Ø³Ù…ÙŠÙ†ØŸ", a: "1. Ø¹Ø¯ Ø§Ù„Ø±Ø¤ÙˆØ³ (Ù…ØªØ³Ø§ÙˆÙŠ).<br>2. Ø¹Ø¯ Ø§Ù„Ø­ÙˆØ§Ù (Ù…ØªØ³Ø§ÙˆÙŠ).<br>3. <strong>Ø§Ù„Ø£Ù‡Ù…:</strong> Ù‚Ø§Ø±Ù† Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø±Ø¤ÙˆØ³ (Degree Sequence)." }
        ];

        // ==========================================
        // 2. ENGINE WITH GRADING LOGIC
        // ==========================================
        let timeLeft = localStorage.getItem('discrete_exam_time') ? parseInt(localStorage.getItem('discrete_exam_time')) : 120 * 60;
        let timerInterval;
        
        // GRADING VARIABLES
        let currentScore = 0;
        let attemptedMCQs = new Set();
        let gradedEssays = new Set();

        function initExam() {
            const container = document.getElementById('quiz-container');
            
            // --- MCQ RENDER ---
            mcqData.forEach((item, index) => {
                if(item.section) {
                    const secHeader = document.createElement('h2');
                    secHeader.className = "text-xl font-bold text-amber-800 mt-8 mb-4 border-b-2 border-amber-200 pb-2";
                    secHeader.innerText = item.section;
                    container.appendChild(secHeader);
                }

                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `q-${index}`;
                
                let opts = '';
                item.options.forEach((opt, i) => {
                    // ID needed for grading logic
                    opts += `<button class="option-btn" id="btn-${index}-${i}" onclick="check(${index}, ${i})">${opt}</button>`;
                });

                card.innerHTML = `
                    <h3 class="font-bold text-lg mb-4 text-amber-900">Ø³${index+1}: ${item.q}</h3>
                    <div class="space-y-2">${opts}</div>
                    <div class="cheat-box" id="cheat-${index}">
                        <strong>ğŸ’¡ ØªÙ„Ù…ÙŠØ­:</strong> ${item.cheat}
                    </div>
                `;
                container.appendChild(card);
            });

            // --- ESSAY RENDER ---
            const essayHeader = document.createElement('h2');
            essayHeader.className = "text-2xl font-black text-amber-800 mt-12 mb-6 border-b-4 border-amber-200 pb-2";
            essayHeader.innerText = "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠØ© (Essay Questions)";
            container.appendChild(essayHeader);

            essayData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'question-card border-l-4 border-l-amber-500';
                card.id = `essay-card-${index}`;
                card.innerHTML = `
                    <div class="flex justify-between">
                        <h3 class="font-bold text-lg mb-4 text-amber-900">${item.q}</h3>
                        <span class="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded h-fit font-bold">2 Ø¯Ø±Ø¬Ø§Øª</span>
                    </div>
                    <textarea class="w-full p-3 border border-amber-200 rounded-lg mb-4 font-sans focus:ring-2 focus:ring-amber-500 outline-none" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§..."></textarea>
                    <button onclick="toggleEssay(${index})" class="text-sm bg-amber-100 text-amber-700 px-3 py-1 rounded hover:bg-amber-200 font-bold transition">Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
                    
                    <div class="essay-answer" id="essay-${index}">
                        <div class="mb-4">${item.a}</div>
                        
                        <div class="bg-white p-3 rounded border border-slate-200 text-center">
                            <p class="text-sm font-bold text-slate-600 mb-2">Ù‡Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ØŸ (ÙƒÙ† ØµØ§Ø¯Ù‚Ø§Ù‹ ğŸ˜‰)</p>
                            <div class="grading-btns" id="grading-area-${index}">
                                <button onclick="rateEssay(${index}, true)" class="grade-btn grade-yes">âœ… Ù†Ø¹Ù…ØŒ ØµØ­ÙŠØ­Ø© (+2)</button>
                                <button onclick="rateEssay(${index}, false)" class="grade-btn grade-no">âŒ Ù„Ø§ØŒ Ø®Ø§Ø·Ø¦Ø© (0)</button>
                            </div>
                            <div id="grade-result-${index}" class="hidden font-bold mt-2"></div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });

            startTimer();
            if(window.MathJax) window.MathJax.typesetPromise();
        }

        // --- CHECK ANSWER (MCQ) ---
        function check(qIdx, optIdx) {
            if (attemptedMCQs.has(qIdx)) return; 
            attemptedMCQs.add(qIdx);

            const card = document.getElementById(`q-${qIdx}`);
            const btns = card.querySelectorAll('.option-btn');
            const correctIdx = mcqData[qIdx].a;

            // Lock buttons
            btns.forEach(b => b.classList.add('disabled'));

            if (optIdx === correctIdx) {
                document.getElementById(`btn-${qIdx}-${optIdx}`).classList.add('correct');
                card.classList.add('correct-card');
                
                // Add Score (0.5)
                currentScore += 0.5;
                updateScoreUI();
                
            } else {
                document.getElementById(`btn-${qIdx}-${optIdx}`).classList.add('wrong');
                document.getElementById(`btn-${qIdx}-${correctIdx}`).classList.add('correct');
                card.classList.add('wrong-card');
            }

            document.getElementById(`cheat-${qIdx}`).style.display = 'block';
        }

        // --- RATE ESSAY ---
        function rateEssay(idx, isCorrect) {
            if (gradedEssays.has(idx)) return;
            gradedEssays.add(idx);

            const resultDiv = document.getElementById(`grade-result-${idx}`);
            const btnArea = document.getElementById(`grading-area-${idx}`);
            const card = document.getElementById(`essay-card-${idx}`);

            btnArea.style.display = 'none'; 
            resultDiv.classList.remove('hidden');

            if (isCorrect) {
                currentScore += 2;
                updateScoreUI();
                resultDiv.innerHTML = `<span class="text-green-600">ØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø© (+2) ğŸ‰</span>`;
                card.classList.add('correct-card');
            } else {
                resultDiv.innerHTML = `<span class="text-red-600">Ø­Ø¸Ø§Ù‹ Ø£ÙˆÙØ± (0)</span>`;
                card.classList.add('wrong-card');
            }
        }

        function updateScoreUI() {
            const scoreEl = document.getElementById('current-score');
            scoreEl.innerText = currentScore;
            scoreEl.parentElement.classList.add('scale-110');
            setTimeout(() => scoreEl.parentElement.classList.remove('scale-110'), 200);
        }

        function toggleEssay(idx) {
            const el = document.getElementById(`essay-${idx}`);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
            if(window.MathJax) window.MathJax.typesetPromise();
        }

        function revealAll() {
            if(!confirm("ØªØ­Ø°ÙŠØ±: ÙƒØ´Ù Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø³ÙŠÙ„ØºÙŠ Ø§Ø­ØªØ³Ø§Ø¨ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©!")) return;
            mcqData.forEach((item, i) => {
                if(!attemptedMCQs.has(i)) {
                    const correctBtn = document.getElementById(`btn-${i}-${item.a}`);
                    if(correctBtn) correctBtn.classList.add('correct');
                    document.getElementById(`cheat-${i}`).style.display = 'block';
                    attemptedMCQs.add(i); 
                }
            });
             essayData.forEach((item, i) => {
                document.getElementById(`essay-${i}`).style.display = 'block';
            });
        }

        function startTimer() {
            const el = document.getElementById('timer');
            timerInterval = setInterval(() => {
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    el.innerText = "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!";
                    return;
                }
                timeLeft--;
                localStorage.setItem('discrete_exam_time', timeLeft);
                const m = Math.floor(timeLeft / 60);
                const s = timeLeft % 60;
                el.innerText = `${m}:${s < 10 ? '0'+s : s}`;
            }, 1000);
        }

        function resetExam() {
            if(confirm("Ø³ÙŠØªÙ… ØªØµÙÙŠØ± Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±. Ù…ØªØ£ÙƒØ¯ØŸ")) {
                localStorage.removeItem('discrete_exam_progress');
                localStorage.removeItem('discrete_exam_time');
                location.reload();
            }
        }

        document.addEventListener('DOMContentLoaded', initExam);
    </script>
</body>
</html>